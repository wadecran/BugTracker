@using BugTracker.ViewModels
@model ProjectIndexVM

@{
	ViewBag.Title = "Projects";
}



<div class="content">
	<div class="container-fluid">
		<br />
		<h2>Projects</h2>
		<div class="row">
			<div class="col-md-12">
				<div class="card">
					<div class="card-header">
						<h5 class="card-title">My Projects</h5>

						<div class="card-tools">
							<button type="button" class="btn btn-tool" data-card-widget="collapse">
								<i class="fas fa-minus"></i>
							</button>
						</div>
					</div>
					<!-- /.card-header -->
					<div class="card-body">
						@if (Model.UserProjects.Count < 1)
						{
							<p class="text-center">You are not assigned to any Projects.</p>
						}
						else
						{
							<table class="table">
								<thead>
									<tr>
										<th>
											Name
										</th>
										<th>
											Details
										</th>
										<th>
											Created
										</th>
										<th>
											Archived?
										</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									@foreach (var item in Model.UserProjects)
									{
										<tr>
											<td>
												@Html.DisplayFor(modelItem => item.Name)
											</td>
											<td>
												@Html.DisplayFor(modelItem => item.Details)
											</td>
											<td>
												@Html.DisplayFor(modelItem => item.Created)
											</td>
											<td>
												@Html.DisplayFor(modelItem => item.IsArchived)
											</td>
											<td>
												@Html.ActionLink("Details", "Dashboard", new { id = item.Id })

											</td>
										</tr>
									}
								</tbody>
							</table>
						}
						<!-- /.row -->
					</div>
				</div>
			</div>
		</div>

		@if (User.IsInRole("Admin") || User.IsInRole("ProjectManager"))
		{
			<div class="row">
				<div class="col-md-12">
					<div class="card">
						<div class="card-header">
							<h5 class="card-title">All Projects</h5>

							<div class="card-tools">
								<button type="button" class="btn btn-tool" data-card-widget="collapse">
									<i class="fas fa-minus"></i>
								</button>
							</div>
						</div>
						<!-- /.card-header -->
						<div class="card-body">
							@if (Model.Projects.Count < 1)
							{
								<p class="text-center">No Projects to display</p>
							}
							else
							{
								<table class="table">
									<thead>
										<tr>
											<th>
												Name
											</th>
											<th>
												Details
											</th>
											<th>
												Created
											</th>
											<th>
												Archived?
											</th>
											<th></th>
										</tr>
									</thead>
									<tbody>
										@foreach (var item in Model.Projects)
										{
											<tr>
												<td>
													@Html.DisplayFor(modelItem => item.Name)
												</td>
												<td>
													@Html.DisplayFor(modelItem => item.Details)
												</td>
												<td>
													@Html.DisplayFor(modelItem => item.Created)
												</td>
												<td>
													@Html.DisplayFor(modelItem => item.IsArchived)
												</td>
												<td>
													@Html.ActionLink("Details", "Dashboard", new { id = item.Id })
												</td>
											</tr>
										}
									</tbody>
								</table>
							}
							<!-- /.row -->
						</div>
					</div>
				</div>
			</div>
		}
	</div><!-- /.container-fluid -->
</div>
<!-- /.content -->
